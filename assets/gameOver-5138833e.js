import{r as h,b as N,o as l,d as g,u as a,y,j as P,F as b,f as t,t as i,k as D,_ as I,c as w,e as k,v as x,g as _}from"./index-0d521d25.js";import{L as F}from"./loadingAuth-3286095e.js";import{_ as O,a as f,b as U}from"./GamePage-12af7e15.js";import{u as B}from"./auth-2058c0d8.js";import{s as A,a as W}from"./fetch-5f5bc1cf.js";import"./yes_login-65e1999f.js";import"./close-ed01941b.js";const j="/darts-calculator/assets/save-3d34bab9.svg",G=()=>{const e=h(!1),s=h(!1);return{isStatisticSave:e,showDone:s,setStatisticInDB:async(n,m,v,d,r,S,o)=>{e.value=!0;const c={};for(const p in m)c[p]=m[p].value;v||delete c.percentDouble;try{const{response:p,json:$}=await A(n,S,{statistic:c,legs:d,legsWon:r,legsLose:d-r,timeZone:new Date().getTimezoneOffset()/60});await B(n,S,$),await W($,p),s.value=!0}catch(p){o("showPopUp",p.message),e.value=!1}}}};const L=["disabled"],E=t("img",{class:"save-icon",src:j,alt:"save"},null,-1),M=[E],V=t("img",{class:"save-icon",src:O,alt:"done"},null,-1),T=[V],C={__name:"saveStatistic",props:{player:String,gameStatistic:Object,isPercentDoubleInStat:Boolean,legNumber:Number,legsWonInGame:Number},emits:["showPopUp"],setup(e){const s=N(),{isStatisticSave:u,showDone:n,setStatisticInDB:m}=G();return(v,d)=>(l(),g(b,null,[a(s).users[e.player]&&!a(n)?(l(),g("button",{key:0,class:y(["game-statistic__save",{"game-statistic__save_left":e.player==="P1","game-statistic__save_right":e.player==="P2"}]),onClick:d[0]||(d[0]=r=>a(m)(e.player,e.gameStatistic,e.isPercentDoubleInStat,e.legNumber,e.legsWonInGame,a(s),v.$emit)),title:"сохранить статистику матча",disabled:a(u)},M,10,L)):P("",!0),a(s).users[e.player]&&a(n)&&a(u)?(l(),g("div",{key:1,class:y(["game-statistic__save game-statistic__save-done",{"game-statistic__save_left":e.player==="P1","game-statistic__save_right":e.player==="P2"}]),title:"статистика сохранена"},T,2)):P("",!0)],64))}},z=t("h4",{class:"game-statistic__header-group"},"Средний набор",-1),R={class:"game-statistic__parameters statistic-parameters"},Z={class:"statistic-parameters__values"},q=t("h5",{class:"statistic-parameters__header"},"матч",-1),H={class:"statistic-parameters__values"},J={class:"game-statistic__parameters statistic-parameters"},K={class:"statistic-parameters__values"},Q=t("h5",{class:"statistic-parameters__header"},"выигранные леги",-1),X={class:"statistic-parameters__values"},Y={class:"game-statistic__parameters statistic-parameters"},tt={class:"statistic-parameters__values"},et=t("h5",{class:"statistic-parameters__header"},"проигранные леги",-1),st={class:"statistic-parameters__values"},at={class:"game-statistic__parameters statistic-parameters"},it={class:"statistic-parameters__values"},ot=t("h5",{class:"statistic-parameters__header"},"9 дротиков",-1),ct={class:"statistic-parameters__values"},nt={__name:"gameAverage",props:{gameStatisticP1:Object,gameStatisticP2:Object},setup(e){return(s,u)=>(l(),g(b,null,[z,t("div",R,[t("div",Z,i(e.gameStatisticP1.averagePoints.value.toFixed(2)),1),q,t("div",H,i(e.gameStatisticP2.averagePoints.value.toFixed(2)),1)]),t("div",J,[t("div",K,i(e.gameStatisticP1.averagePointsWinLegs.value.toFixed(2)),1),Q,t("div",X,i(e.gameStatisticP2.averagePointsWinLegs.value.toFixed(2)),1)]),t("div",Y,[t("div",tt,i(e.gameStatisticP1.averagePointsLoseLegs.value.toFixed(2)),1),et,t("div",st,i(e.gameStatisticP2.averagePointsLoseLegs.value.toFixed(2)),1)]),t("div",at,[t("div",it,i(e.gameStatisticP1.averageFirstNineDarts.value.toFixed(2)),1),ot,t("div",ct,i(e.gameStatisticP2.averageFirstNineDarts.value.toFixed(2)),1)])],64))}},rt=t("h4",{class:"game-statistic__header-group"},"Очки",-1),lt={class:"game-statistic__parameters statistic-parameters"},mt={class:"statistic-parameters__values"},_t=t("h5",{class:"statistic-parameters__header"},"180",-1),ut={class:"statistic-parameters__values"},gt={class:"game-statistic__parameters statistic-parameters"},dt={class:"statistic-parameters__values"},Pt=t("h5",{class:"statistic-parameters__header"},"171+",-1),vt={class:"statistic-parameters__values"},pt={class:"game-statistic__parameters statistic-parameters"},ht={class:"statistic-parameters__values"},St=t("h5",{class:"statistic-parameters__header"},"131+",-1),bt={class:"statistic-parameters__values"},$t={class:"game-statistic__parameters statistic-parameters"},yt={class:"statistic-parameters__values"},Dt=t("h5",{class:"statistic-parameters__header"},"96+",-1),It={class:"statistic-parameters__values"},wt={__name:"gamePoints",props:{gameStatisticP1:Object,gameStatisticP2:Object},setup(e){return(s,u)=>(l(),g(b,null,[rt,t("div",lt,[t("div",mt,i(e.gameStatisticP1.p180.value),1),_t,t("div",ut,i(e.gameStatisticP2.p180.value),1)]),t("div",gt,[t("div",dt,i(e.gameStatisticP1.p171.value),1),Pt,t("div",vt,i(e.gameStatisticP2.p171.value),1)]),t("div",pt,[t("div",ht,i(e.gameStatisticP1.p131.value),1),St,t("div",bt,i(e.gameStatisticP2.p131.value),1)]),t("div",$t,[t("div",yt,i(e.gameStatisticP1.p96.value),1),Dt,t("div",It,i(e.gameStatisticP2.p96.value),1)])],64))}},ft=t("h4",{class:"game-statistic__header-group"},"Закрытия",-1),Ut={key:0,class:"game-statistic__parameters statistic-parameters"},Ct={class:"statistic-parameters__values"},Nt={key:0},kt=t("h5",{class:"statistic-parameters__header"},"%",-1),xt={class:"statistic-parameters__values"},Ft={key:0},Ot={class:"game-statistic__parameters statistic-parameters"},Bt={class:"statistic-parameters__values"},At=t("h5",{class:"statistic-parameters__header"},"наибольшее",-1),Wt={class:"statistic-parameters__values"},jt={__name:"gameCheckout",props:{gameStatisticP1:Object,gameStatisticP2:Object,isPercentDoubleInStatP1:Boolean,isPercentDoubleInStatP2:Boolean},setup(e){return(s,u)=>(l(),g(b,null,[ft,e.isPercentDoubleInStatP1||e.isPercentDoubleInStatP2?(l(),g("div",Ut,[t("div",Ct,[e.isPercentDoubleInStatP1?(l(),g("span",Nt,i(e.gameStatisticP1.percentDouble.value.toFixed(2))+" % ",1)):P("",!0)]),kt,t("div",xt,[e.isPercentDoubleInStatP2?(l(),g("span",Ft,i(e.gameStatisticP2.percentDouble.value.toFixed(2))+" % ",1)):P("",!0)])])):P("",!0),t("div",Ot,[t("div",Bt,i(e.gameStatisticP1.highestCheckout.value),1),At,t("div",Wt,i(e.gameStatisticP2.highestCheckout.value),1)])],64))}},Gt=()=>{const e={P1:h(""),P2:h("")};return{popUpMessage:e,showPopUp:(n,m)=>e[m].value=n,closePopUp:n=>e[n].value=""}},Lt=()=>({P1:h(!1),P2:h(!1),show(s){this[s].value=!0},close(s){this[s].value=!1}});const Et={class:"dialog-content-wrapper game-over"},Mt={class:"game-over__content-wrapper"},Vt=t("h2",{class:"game-over__header"},"Матч окончен",-1),Tt={class:"game-over__statistic-wrapper"},zt={class:"game-over__statistic game-statistic"},Rt={class:"auth-actions-wrapper"},Zt={class:"game-statistic__player-names game-statistic-player-names"},qt={class:"game-statistic-player-names__name game-statistic-player-names__name_margin-right"},Ht={class:"game-statistic-player-names__name"},Jt={class:"game-statistic__result game-result"},Kt={class:"game-result__player-score game-result__player-score_margin-right"},Qt={class:"game-result__player-score"},oe={__name:"gameOver",props:{nameP1:String,nameP2:String,wonP1:Number,wonP2:Number,legsWonInGameP1:Number,legsWonInGameP2:Number,gameStatisticP1:Object,gameStatisticP2:Object,isPercentDoubleInStatP1:Boolean,isPercentDoubleInStatP2:Boolean,legNumber:Number},emits:["startNewGame"],setup(e){const s=e,u=D({loader:()=>I(()=>import("./authComp-b13c5f84.js"),["assets/authComp-b13c5f84.js","assets/index-0d521d25.js","assets/index-46c032b2.css","assets/close-ed01941b.js","assets/loadingAuth-3286095e.js","assets/loadingAuth-dcf413b1.css","assets/authComp-cb950dcf.css"]),loadingComponent:F,delay:0}),n=D({loader:()=>I(()=>import("./popUp-c10c4e15.js"),["assets/popUp-c10c4e15.js","assets/index-0d521d25.js","assets/index-46c032b2.css","assets/popUp-42c57df3.css"])}),{popUpMessage:m,showPopUp:v,closePopUp:d}=Gt(),r=Lt();return(S,o)=>(l(),g("div",Et,[a(r).P1.value?(l(),w(a(u),{key:0,onCloseAuthComp:o[0]||(o[0]=c=>a(r).close("P1")),player:"P1"})):P("",!0),a(r).P2.value?(l(),w(a(u),{key:1,onCloseAuthComp:o[1]||(o[1]=c=>a(r).close("P2")),player:"P2"})):P("",!0),k(t("div",Mt,[Vt,t("div",Tt,[_(f,{class:"game-over__auth-state_top-left",player:"P1",backgroundColor:"rgb(182, 195, 197)"}),_(f,{class:"game-over__auth-state_top-right",player:"P2",backgroundColor:"rgb(182, 195, 197)"}),_(C,{player:"P1",gameStatistic:s.gameStatisticP1,isPercentDoubleInStat:s.isPercentDoubleInStatP1,legNumber:s.legNumber,legsWonInGame:e.legsWonInGameP1,onShowPopUp:o[2]||(o[2]=c=>a(v)(c,"P1"))},null,8,["gameStatistic","isPercentDoubleInStat","legNumber","legsWonInGame"]),_(C,{player:"P2",gameStatistic:s.gameStatisticP2,isPercentDoubleInStat:s.isPercentDoubleInStatP2,legNumber:s.legNumber,legsWonInGame:e.legsWonInGameP2,onShowPopUp:o[3]||(o[3]=c=>a(v)(c,"P2"))},null,8,["gameStatistic","isPercentDoubleInStat","legNumber","legsWonInGame"]),t("div",zt,[t("div",Rt,[_(U,{player:"P1",onOpenAuthComp:o[4]||(o[4]=c=>a(r).show("P1"))}),_(U,{player:"P2",onOpenAuthComp:o[5]||(o[5]=c=>a(r).show("P2"))})]),t("div",Zt,[t("div",qt,i(s.nameP1),1),t("div",Ht,i(s.nameP2),1)]),t("div",Jt,[t("div",Kt,i(s.wonP1),1),t("div",Qt,i(s.wonP2),1)]),_(nt,{gameStatisticP1:s.gameStatisticP1,gameStatisticP2:s.gameStatisticP2},null,8,["gameStatisticP1","gameStatisticP2"]),_(wt,{gameStatisticP1:s.gameStatisticP1,gameStatisticP2:s.gameStatisticP2},null,8,["gameStatisticP1","gameStatisticP2"]),_(jt,{gameStatisticP1:s.gameStatisticP1,gameStatisticP2:s.gameStatisticP2,isPercentDoubleInStatP1:s.isPercentDoubleInStatP1,isPercentDoubleInStatP2:s.isPercentDoubleInStatP2},null,8,["gameStatisticP1","gameStatisticP2","isPercentDoubleInStatP1","isPercentDoubleInStatP2"])])]),t("button",{class:"base-button game-over__new-game",onClick:o[6]||(o[6]=c=>S.$emit("startNewGame"))}," Новый матч ")],512),[[x,!a(r).P1.value&&!a(r).P2.value]]),_(a(n),{popUpSeen:!!a(m).P1.value,popUpMessage:a(m).P1.value,popUpDuration:4e3,where:"left",howFar:"0px",onClosePopUp:o[7]||(o[7]=c=>a(d)("P1"))},null,8,["popUpSeen","popUpMessage"]),_(a(n),{popUpSeen:!!a(m).P2.value,popUpMessage:a(m).P2.value,popUpDuration:4e3,where:"right",howFar:"0px",onClosePopUp:o[8]||(o[8]=c=>a(d)("P2"))},null,8,["popUpSeen","popUpMessage"])]))}};export{oe as default};
